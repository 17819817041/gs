{"remainingRequest":"E:\\gs\\Petavi\\node_modules\\babel-loader\\lib\\index.js!E:\\gs\\Petavi\\src\\assets\\js\\websdk.js","dependencies":[{"path":"E:\\gs\\Petavi\\src\\assets\\js\\websdk.js","mtime":1622616471766},{"path":"E:\\gs\\Petavi\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\gs\\Petavi\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFdlYklNIGZyb20gImVhc2Vtb2Itd2Vic2RrIjsKaW1wb3J0IGNvbmZpZyBmcm9tICIuL2NvbmZpZy5qcyI7CmltcG9ydCBzdG9yZSBmcm9tICJAL3Z1ZXgvc3RvcmUuanMiOwppbXBvcnQgcm91dGVyIGZyb20gIkAvcm91dGVyL3JvdXRlci9yb3V0ZXIuanMiOwp2YXIgY29ubiA9IHt9OwpXZWJJTS5jb25maWcgPSBjb25maWc7CmNvbm4gPSBXZWJJTS5jb25uID0gbmV3IFdlYklNLmNvbm5lY3Rpb24oewogIGFwcEtleTogV2ViSU0uY29uZmlnLmFwcGtleSwKICBpc0h0dHBETlM6IFdlYklNLmNvbmZpZy5pc0h0dHBETlMsCiAgaXNNdWx0aUxvZ2luU2Vzc2lvbnM6IFdlYklNLmNvbmZpZy5pc011bHRpTG9naW5TZXNzaW9ucywKICBodHRwczogV2ViSU0uY29uZmlnLmh0dHBzLAogIHVybDogV2ViSU0uY29uZmlnLnNvY2tldFNlcnZlciwKICBhcGlVcmw6IFdlYklNLmNvbmZpZy5yZXN0U2VydmVyLAogIGlzQXV0b0xvZ2luOiBXZWJJTS5jb25maWcuaXNBdXRvTG9naW4sCiAgYXV0b1JlY29ubmVjdE51bU1heDogV2ViSU0uY29uZmlnLmF1dG9SZWNvbm5lY3ROdW1NYXgsCiAgYXV0b1JlY29ubmVjdEludGVydmFsOiBXZWJJTS5jb25maWcuYXV0b1JlY29ubmVjdEludGVydmFsLAogIGRlbGl2ZXJ5OiBXZWJJTS5jb25maWcuZGVsaXZlcnksCiAgdXNlT3duVXBsb2FkRnVuOiBXZWJJTS5jb25maWcudXNlT3duVXBsb2FkRnVuCn0pOwpjb25uLmxpc3Rlbih7CiAgb25PcGVuZWQ6IGZ1bmN0aW9uIG9uT3BlbmVkKG1lc3NhZ2UpIHsKICAgIGNvbnNvbGUubG9nKCJvcGVu55m75b2VIiwgbWVzc2FnZSk7CiAgfSwKICAvL+i/nuaOpeaIkOWKn+WbnuiwgyAKICBvbkNsb3NlZDogZnVuY3Rpb24gb25DbG9zZWQobWVzc2FnZSkgewogICAgY29uc29sZS5sb2coImNsb3Nl55m75Ye6Iik7CiAgfSwKICAvL+i/nuaOpeWFs+mXreWbnuiwgwogIG9uVGV4dE1lc3NhZ2U6IGZ1bmN0aW9uIG9uVGV4dE1lc3NhZ2UoZSkgewogICAgY29uc29sZS5sb2coIuaUtuWIsOa2iOaBryIsIGUpOwogIH0gLy/mlLbliLDmlofmnKzmtojmga8KCn0pOwp2YXIgb3B0aW9ucyA9IHsKICB1c2VybmFtZTogJ2ExOCcsCiAgcGFzc3dvcmQ6ICcxMjM0NTYnLAogIG5pY2tuYW1lOiAn5ZWK5ZWK5ZWKOCcsCiAgYXBwS2V5OiBXZWJJTS5jb25maWcuYXBwa2V5LAogIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoKSB7CiAgICBjb25zb2xlLmxvZygi5rOo5YaM5oiQ5YqfIik7CiAgfSwKICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoZXJyKSB7CiAgICB2YXIgZXJyb3JEYXRhID0gSlNPTi5wYXJzZShlcnIuZGF0YSk7CgogICAgaWYgKGVycm9yRGF0YS5lcnJvciA9PT0gJ2R1cGxpY2F0ZV91bmlxdWVfcHJvcGVydHlfZXhpc3RzJykgewogICAgICBjb25zb2xlLmxvZygn55So5oi35bey5a2Y5Zyo77yBJyk7CiAgICB9IGVsc2UgaWYgKGVycm9yRGF0YS5lcnJvciA9PT0gJ2lsbGVnYWxfYXJndW1lbnQnKSB7CiAgICAgIGlmIChlcnJvckRhdGEuZXJyb3JfZGVzY3JpcHRpb24gPT09ICdVU0VSTkFNRV9UT09fTE9ORycpIHsKICAgICAgICBjb25zb2xlLmxvZygn55So5oi35ZCN6LaF6L+HNjTkuKrlrZfoioLvvIEnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygn55So5oi35ZCN5LiN5ZCI5rOV77yBJyk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAoZXJyb3JEYXRhLmVycm9yID09PSAndW5hdXRob3JpemVkJykgewogICAgICBjb25zb2xlLmxvZygn5rOo5YaM5aSx6LSl77yM5peg5p2D6ZmQ77yBJyk7CiAgICB9IGVsc2UgaWYgKGVycm9yRGF0YS5lcnJvciA9PT0gJ3Jlc291cmNlX2xpbWl0ZWQnKSB7CiAgICAgIGNvbnNvbGUubG9nKCfmgqjnmoRBcHDnlKjmiLfms6jlhozmlbDph4/lt7Lovr7kuIrpmZAs6K+35Y2H57qn6Iez5LyB5Lia54mI77yBJyk7CiAgICB9CiAgfQp9OyAvLyAgIGNvbm4ucmVnaXN0ZXJVc2VyKG9wdGlvbnMpOwoKaW1wb3J0IHdlYnJ0YyBmcm9tICdlYXNlbW9iLXdlYnJ0Yyc7CnZhciBydGNDYWxsID0gbmV3IHdlYnJ0Yy5DYWxsKHsKICBjb25uZWN0aW9uOiBjb25uLAogIC8vIFdlYklNIOeahOmTvuaOpeS/oeaBrwogIG1lZGlhU3RyZWFtQ29uc3RhaW50czogewogICAgYXVkaW86IHRydWUsCiAgICB2aWRlbzogdHJ1ZQogICAgLyoqDQogICAgKiDkv67mlLnpu5jorqTmkYTlg4/lpLTvvIzlj6/ku6XmjInnhafku6XkuIvorr7nva7vvIzkuI3mlK/mjIHop4bpopHov4fnqIvkuK3liIfmjaINCiAgICAqIHZpZGVvOnsgJ2ZhY2luZ01vZGUnOiAidXNlciIgfSDosIPnlKjliY3nva7mkYTlg4/lpLQNCiAgICAqIHZpZGVvOiB7IGZhY2luZ01vZGU6IHsgZXhhY3Q6ICJlbnZpcm9ubWVudCIgfSB9IOWQjue9rg0KICAgICovCgogIH0sCiAgbGlzdGVuZXI6IHsKICAgIG9uQWNjZXB0Q2FsbDogZnVuY3Rpb24gb25BY2NlcHRDYWxsKGZyb20sIG9wdGlvbnMpIHsKICAgICAgY29uc29sZS5sb2coJ29uQWNjZXB0Q2FsbDo6JywgJ2Zyb206ICcsIGZyb20sICdvcHRpb25zOiAnLCBvcHRpb25zKTsKCiAgICAgIGlmIChmcm9tKSB7CiAgICAgICAgc3RvcmUuY29tbWl0KCJzZXRVc2VyIiwgewogICAgICAgICAga2V5OiAnY2FsbE1vZGFsJywKICAgICAgICAgIHZhbHVlOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIHN0b3JlLmNvbW1pdCgic2V0VXNlciIsIHsKICAgICAgICAgIGtleTogJ2NhbGxNb2RhbDInLAogICAgICAgICAgdmFsdWU6IGZhbHNlCiAgICAgICAgfSk7CiAgICAgICAgdmFyIHN0YXJUaW1lID0gRGF0ZS5ub3coKTsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc3RhclRpbWUnLCBzdGFyVGltZSk7CiAgICAgICAgcm91dGVyLnB1c2goIi9hZ29yYSIpOwogICAgICB9CiAgICB9LAogICAgLy/pgJrov4dzdHJlYW1UeXBl5Yy65YiG6KeG6aKR5rWB5ZKM6Z+z6aKR5rWB77yMc3RyZWFtVHlwZTogJ1ZPSUNFJyjpn7PpopHmtYEp77yMJ1ZJREVPJyjop4bpopHmtYEpCiAgICBvbkdvdFJlbW90ZVN0cmVhbTogZnVuY3Rpb24gb25Hb3RSZW1vdGVTdHJlYW0oc3RyZWFtLCBzdHJlYW1UeXBlKSB7CiAgICAgIGNvbnNvbGUubG9nKCdvbkdvdFJlbW90ZVN0cmVhbTo6JywgJ3N0cmVhbTogJywgc3RyZWFtLCAnc3RyZWFtVHlwZTogJywgc3RyZWFtVHlwZSk7CiAgICAgIHN0b3JlLmNvbW1pdCgic2V0QXBwIiwgewogICAgICAgIGtleTogJ3JlbW90ZVN0cmVhbScsCiAgICAgICAgdmFsdWU6IHN0cmVhbQogICAgICB9KTsgLy8gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIC8vICAgICB2YXIgcmVWaWRlbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2aWRlbycpOwogICAgICAvLyAgICAgY29uc29sZS5sb2coNjY2LHJlVmlkZW8ucGxheSxzdHJlYW0pCiAgICAgIC8vICAgICByZVZpZGVvLnNyY09iamVjdCA9IHN0cmVhbTsKICAgICAgLy8gICAgIHJlVmlkZW8ucGxheSgpCiAgICAgIC8vIH0sMTAwMCkKICAgICAgLy8gdmFyIHZpZGVvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZpZGVvJyk7CiAgICAgIC8vIHZpZGVvLnNyY09iamVjdCA9IHN0cmVhbTsKICAgICAgLy8gdmlkZW8ucGxheSgpCiAgICB9LAogICAgb25Hb3RMb2NhbFN0cmVhbTogZnVuY3Rpb24gb25Hb3RMb2NhbFN0cmVhbShzdHJlYW0sIHN0cmVhbVR5cGUpIHsKICAgICAgY29uc29sZS5sb2coJ29uR290TG9jYWxTdHJlYW06OicsICdzdHJlYW06Jywgc3RyZWFtLCAnc3RyZWFtVHlwZTogJywgc3RyZWFtVHlwZSk7CiAgICAgIHN0b3JlLmNvbW1pdCgic2V0QXBwIiwgewogICAgICAgIGtleTogJ2xvY2FsU3RyZWFtJywKICAgICAgICB2YWx1ZTogc3RyZWFtCiAgICAgIH0pOyAvLyB2YXIgdmlkZW8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9jYWxWaWRlbycpOwogICAgICAvLyB2aWRlby5zcmNPYmplY3QgPSBzdHJlYW07CiAgICAgIC8vIHZpZGVvLnBsYXkoKQogICAgfSwKICAgIG9uUmluZ2luZzogZnVuY3Rpb24gb25SaW5naW5nKGNhbGxlciwgc3RyZWFtVHlwZSkgewogICAgICBjb25zb2xlLmxvZygib25SaW5naW5nIiwgY2FsbGVyKTsKICAgICAgc3RvcmUuY29tbWl0KCJzZXRVc2VyIiwgewogICAgICAgIGtleTogJ2NhbGxNb2RhbDInLAogICAgICAgIHZhbHVlOiB0cnVlCiAgICAgIH0pOwogICAgfSwKICAgIG9uVGVybUNhbGw6IGZ1bmN0aW9uIG9uVGVybUNhbGwocmVhc29uKSB7CiAgICAgIGNvbnNvbGUubG9nKCdvblRlcm1DYWxsOjonKTsKICAgICAgY29uc29sZS5sb2coJ3JlYXNvbjonLCByZWFzb24pOwogICAgICBzdG9yZS5jb21taXQoInNldFVzZXIiLCB7CiAgICAgICAga2V5OiAnY2FsbE1vZGFsJywKICAgICAgICB2YWx1ZTogZmFsc2UKICAgICAgfSk7CiAgICAgIHN0b3JlLmNvbW1pdCgic2V0VXNlciIsIHsKICAgICAgICBrZXk6ICdjYWxsTW9kYWwyJywKICAgICAgICB2YWx1ZTogZmFsc2UKICAgICAgfSk7CiAgICAgIHZhciBlbmRUaW1lID0gRGF0ZS5ub3coKTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2VuZFRpbWUnLCBlbmRUaW1lKTsKICAgICAgc3RvcmUuY29tbWl0KCJzZXRVc2VyIiwgewogICAgICAgIGtleTogJ3N1cmVDYWxsJywKICAgICAgICB2YWx1ZTogdHJ1ZQogICAgICB9KTsgLy8gcm91dGVyLnJlcGxhY2UoKSAKICAgICAgLy8gcm91dGVyLmJhY2soKQogICAgfSwKICAgIG9uSWNlQ29ubmVjdGlvblN0YXRlQ2hhbmdlOiBmdW5jdGlvbiBvbkljZUNvbm5lY3Rpb25TdGF0ZUNoYW5nZShpY2VTdGF0ZSkgewogICAgICBjb25zb2xlLmxvZygnb25JY2VDb25uZWN0aW9uU3RhdGVDaGFuZ2U6OicsICdpY2VTdGF0ZTonLCBpY2VTdGF0ZSk7CiAgICB9LAogICAgLy8g6YCa6K+d5pat572R55uR5ZCsCiAgICBvbk5ldFdvcmtEaXNjb25uZWN0OiBmdW5jdGlvbiBvbk5ldFdvcmtEaXNjb25uZWN0KGVuZFR5cGUpIHsKICAgICAgLy8gZW5kVHlwZTogbG9jYWwgfHwgcmVtb3RlLCDlk6rkuIDnq6/mlq3nvZEKICAgICAgY29uc29sZS5sb2coJzF2MSBvbk5ldFdvcmtEaXNjb25uZWN0JywgZW5kVHlwZSk7CiAgICB9LAogICAgb25FcnJvcjogZnVuY3Rpb24gb25FcnJvcihlKSB7CiAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgfQogIH0KfSk7CmV4cG9ydCB7IGNvbm4sIFdlYklNLCBydGNDYWxsIH07"},{"version":3,"sources":["E:/gs/Petavi/src/assets/js/websdk.js"],"names":["WebIM","config","store","router","conn","connection","appKey","appkey","isHttpDNS","isMultiLoginSessions","https","url","socketServer","apiUrl","restServer","isAutoLogin","autoReconnectNumMax","autoReconnectInterval","delivery","useOwnUploadFun","listen","onOpened","message","console","log","onClosed","onTextMessage","e","options","username","password","nickname","success","error","err","errorData","JSON","parse","data","error_description","webrtc","rtcCall","Call","mediaStreamConstaints","audio","video","listener","onAcceptCall","from","commit","key","value","starTime","Date","now","localStorage","setItem","push","onGotRemoteStream","stream","streamType","onGotLocalStream","onRinging","caller","onTermCall","reason","endTime","onIceConnectionStateChange","iceState","onNetWorkDisconnect","endType","onError"],"mappings":"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","sourcesContent":["import WebIM from \"easemob-websdk\"\r\nimport config from \"./config.js\"\r\nimport store from \"@/vuex/store.js\"\r\nimport router from \"@/router/router/router.js\"\r\n\r\nlet conn = {};\r\nWebIM.config = config;\r\nconn = WebIM.conn = new WebIM.connection({\r\n    appKey: WebIM.config.appkey,\r\n    isHttpDNS: WebIM.config.isHttpDNS,\r\n    isMultiLoginSessions: WebIM.config.isMultiLoginSessions,\r\n    https: WebIM.config.https,\r\n    url: WebIM.config.socketServer,\r\n    apiUrl: WebIM.config.restServer,\r\n    isAutoLogin: WebIM.config.isAutoLogin,\r\n    autoReconnectNumMax: WebIM.config.autoReconnectNumMax,\r\n    autoReconnectInterval: WebIM.config.autoReconnectInterval,\r\n    delivery: WebIM.config.delivery,\r\n    useOwnUploadFun: WebIM.config.useOwnUploadFun\r\n})\r\n\r\nconn.listen({\r\n    onOpened: function ( message ) {\r\n        console.log(\"open登录\",message)\r\n    },         //连接成功回调 \r\n    onClosed: function ( message ) {\r\n        console.log(\"close登出\")\r\n    },         //连接关闭回调\r\n    onTextMessage: function ( e ) {\r\n        console.log(\"收到消息\", e)\r\n    },    //收到文本消息\r\n    \r\n});\r\n\r\nvar options = { \r\n    username: 'a18',\r\n    password: '123456',\r\n    nickname: '啊啊啊8',\r\n    appKey: WebIM.config.appkey,\r\n    success: function () { \r\n        console.log(\"注册成功\")\r\n    },  \r\n    error: function (err) {\r\n        let errorData = JSON.parse(err.data);\r\n        if (errorData.error === 'duplicate_unique_property_exists') {\r\n            console.log('用户已存在！');\r\n        } else if (errorData.error === 'illegal_argument') {\r\n            if (errorData.error_description === 'USERNAME_TOO_LONG') {\r\n                console.log('用户名超过64个字节！')\r\n            }else{\r\n                console.log('用户名不合法！')\r\n            }\r\n        } else if (errorData.error === 'unauthorized') {\r\n            console.log('注册失败，无权限！')\r\n        } else if (errorData.error === 'resource_limited') {\r\n            console.log('您的App用户注册数量已达上限,请升级至企业版！')\r\n        }\r\n    }, \r\n}; \r\n//   conn.registerUser(options);\r\n\r\n\r\n\r\nimport webrtc from 'easemob-webrtc'\r\n\r\nvar rtcCall = new webrtc.Call({\r\n    connection: conn, // WebIM 的链接信息\r\n    mediaStreamConstaints: {\r\n            audio: true,\r\n            video: true\r\n            /**\r\n            * 修改默认摄像头，可以按照以下设置，不支持视频过程中切换\r\n            * video:{ 'facingMode': \"user\" } 调用前置摄像头\r\n            * video: { facingMode: { exact: \"environment\" } } 后置\r\n            */\r\n    },\r\n\r\n    listener: {\r\n        onAcceptCall: function (from, options) {\r\n            console.log('onAcceptCall::', 'from: ', from, 'options: ', options);\r\n            if (from) {\r\n                store.commit(\"setUser\",{ key: 'callModal', value: false })\r\n                store.commit(\"setUser\",{ key: 'callModal2', value: false })\r\n                let starTime = Date.now()\r\n                localStorage.setItem('starTime',starTime)\r\n                router.push(\"/agora\")\r\n            }\r\n        },\r\n        //通过streamType区分视频流和音频流，streamType: 'VOICE'(音频流)，'VIDEO'(视频流)\r\n        onGotRemoteStream: function (stream, streamType) {\r\n            console.log('onGotRemoteStream::', 'stream: ', stream, 'streamType: ', streamType);\r\n            store.commit(\"setApp\",{ key: 'remoteStream', value: stream })\r\n\r\n            // setTimeout(() => {\r\n            //     var reVideo = document.getElementById('video');\r\n            //     console.log(666,reVideo.play,stream)\r\n            //     reVideo.srcObject = stream;\r\n            //     reVideo.play()\r\n            // },1000)\r\n            // var video = document.getElementById('video');\r\n            // video.srcObject = stream;\r\n            // video.play()\r\n        },\r\n        onGotLocalStream: function (stream, streamType) {\r\n            console.log('onGotLocalStream::', 'stream:', stream, 'streamType: ', streamType);\r\n            store.commit(\"setApp\",{ key: 'localStream', value: stream })\r\n            // var video = document.getElementById('localVideo');\r\n            // video.srcObject = stream;\r\n            // video.play()\r\n        },\r\n        onRinging: function (caller, streamType) {\r\n            console.log(\"onRinging\", caller)\r\n            store.commit(\"setUser\",{ key: 'callModal2', value: true })\r\n        },\r\n        onTermCall: function (reason) {\r\n            console.log('onTermCall::');\r\n            console.log('reason:', reason);\r\n            store.commit(\"setUser\",{ key: 'callModal', value: false })\r\n            store.commit(\"setUser\",{ key: 'callModal2', value: false })\r\n            let endTime = Date.now()\r\n            localStorage.setItem('endTime',endTime)\r\n            store.commit(\"setUser\",{ key: 'sureCall', value: true })\r\n            // router.replace() \r\n            // router.back()\r\n        },\r\n        onIceConnectionStateChange: function (iceState) {\r\n            console.log('onIceConnectionStateChange::', 'iceState:', iceState);\r\n        },\r\n        // 通话断网监听\r\n        onNetWorkDisconnect(endType) { // endType: local || remote, 哪一端断网\r\n            console.log('1v1 onNetWorkDisconnect', endType);\r\n        },\r\n        onError: function (e) {\r\n            console.log(e);\r\n        }\r\n     }\r\n});\r\n\r\nexport  { conn, WebIM, rtcCall }"]}]}